<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · NMRInversions.jl</title><meta name="title" content="Tutorial · NMRInversions.jl"/><meta property="og:title" content="Tutorial · NMRInversions.jl"/><meta property="twitter:title" content="Tutorial · NMRInversions.jl"/><meta name="description" content="Documentation for NMRInversions.jl."/><meta property="og:description" content="Documentation for NMRInversions.jl."/><meta property="twitter:description" content="Documentation for NMRInversions.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="NMRInversions.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">NMRInversions.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Overview</a></li><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../theory/">Theory</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a><ul class="internal"><li><a class="tocitem" href="#Performing-an-inversion"><span>Performing an inversion</span></a></li><li><a class="tocitem" href="#Examples-with-plots"><span>Examples with plots</span></a></li><li><a class="tocitem" href="#Using-the-expfit-function"><span>Using the expfit function</span></a></li></ul></li><li><a class="tocitem" href="../functions/">Functions</a></li><li><a class="tocitem" href="../types_structs/">Types and Structures</a></li><li><a class="tocitem" href="../savefiles/">Saving data</a></li><li><a class="tocitem" href="../references/">References</a></li><li><a class="tocitem" href="../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/aris-mav/NMRInversions.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/aris-mav/NMRInversions.jl/blob/master/docs/src/tutorial.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p>This page will give you a basic idea about how to use the NMRInversions package. For more details, it&#39;s best to refer to the <a href="../functions/">functions</a> page.</p><div class="admonition is-category-hint" id="Hint-ecdd5738d9b5cc3c"><header class="admonition-header">Hint<a class="admonition-anchor" href="#Hint-ecdd5738d9b5cc3c" title="Permalink"></a></header><div class="admonition-body"><p>All of the commands mentioned below should be typed in the julia console,  or saved in a text file with the .jl extension, to be used  from a terminal with <code>julia file.jl</code>, or through an IDE such as VSCode.</p></div></div><h2 id="Performing-an-inversion"><a class="docs-heading-anchor" href="#Performing-an-inversion">Performing an inversion</a><a id="Performing-an-inversion-1"></a><a class="docs-heading-anchor-permalink" href="#Performing-an-inversion" title="Permalink"></a></h2><p>Suppose we&#39;re working with data coming from a Spinsolve instrument Then we can do the following:</p><p>(you can find some example data in the files of this package,  look at the github page for the example_data folder).</p><pre><code class="language-julia hljs">using NMRInversions

data = import_spinsolve()</code></pre><div class="admonition is-info" id="Info-13d34eb4ddedcdd4"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-13d34eb4ddedcdd4" title="Permalink"></a></header><div class="admonition-body"><p>Since we called the <code>import_spinsolve</code> function without an argument,  it&#39;ll open a file dialog for us to select the files we want to import. (note that <code>import_spinsolve</code> requires two files, the <code>aqcu.par</code> file containing aqcuistion parameters, plus the <code>.dat</code> or <code>.csv</code> file  containing the experiment data.)</p></div></div><p>Now we have the data imported, the inversion can be performed using a single line of code!</p><pre><code class="language-julia hljs">results = invert(data)</code></pre><div class="admonition is-info" id="Info-1f6ad51a7f088d7f"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-1f6ad51a7f088d7f" title="Permalink"></a></header><div class="admonition-body"><p>The <code>results</code> variable above is an <code>inv_out_1D</code> or <code>inv_out_2D</code> structure,  which contains all the relevant information produced by the <code>inversion</code> function. To access that information, we can look at the fields of the structure using the dot notation. The field names contained in the structure can be shown by using the REPL help mode  (typing ? at the julia&gt; prompt), and typing the variable&#39;s name (in this case, <code>?results</code>).  Alternatively, running <code>@doc results</code> will also give you the same answers.</p></div></div><p>The results can easily be visualised through the GLMakie extension of the package.</p><pre><code class="language-julia hljs">using GLMakie
plot(results)</code></pre><p>This will open a GUI with tools to interactively extract some information from the inversion results, by selecting regions and labelling them accordingly.</p><div class="admonition is-info" id="Info-4d550695e11a9a30"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-4d550695e11a9a30" title="Permalink"></a></header><div class="admonition-body"><p>The <code>plot</code> function of GLMakie is modified by this package  to work with results from the invert function as arguments. It&#39;s really easy to use, but if you want more control  on how your plots look, it&#39;s best to create them from scratch  using all the tools available in GLMakie.</p></div></div><p>The process above can also be achieved by a single line of code:</p><pre><code class="language-julia hljs">using NMRInversions, GLMakie
plot(invert(import_spinsolve()))</code></pre><p>Note that the workflow above can work for both 1D and 2D inversions!</p><h2 id="Examples-with-plots"><a class="docs-heading-anchor" href="#Examples-with-plots">Examples with plots</a><a id="Examples-with-plots-1"></a><a class="docs-heading-anchor-permalink" href="#Examples-with-plots" title="Permalink"></a></h2><p>This is how some full examples would look like:</p><pre><code class="language-julia hljs">using NMRInversions, GLMakie

path = &quot;.../NMRInversions.jl/example_data/csv_files/graphene_CPMG.csv&quot;
data = import_csv(IR, path)
results = invert(data)
plot(results)</code></pre><p>The resulting plot will look like:</p><p><img src="../assets/1D_gui.png" alt="Resulting plot"/></p><p>Notice that benath the <span>$T_2$</span> distribution there&#39;s a slider. You can move the ends of it to select a region within the limits defined by the red veritical lines. Then you can use the following options:</p><ul><li><code>Label current selection</code> will highlight the selected region  and add some text in the plot with the weighed average <span>$T_2$</span> of that region.</li><li><code>Filter-out selection</code> will remove the selected region  from the distribution, and it will update the fit and the residuals  accordingly on the plot.</li><li><code>Reset selections</code> gets you back where you started, removes any  selections and brings back filtered-out regions.</li><li><code>Change y scale</code> will change the 1st plot from linear scale to log   scale and back. Only works if there are no negative values (so it will   not work for inversion recovery data).</li><li><code>Save and exit</code> will bring up a window so that you can save your   plot as a .png (without the buttons and the slider).</li></ul><p>Let&#39;s look at a 2D example as well:</p><pre><code class="language-julia hljs">using NMRInversions, GLMakie

paths = [&quot;.../NMRInversions.jl/example_data/spinsolve_IRCPMG/T1IRT2.dat&quot;,
         &quot;.../NMRInversions.jl/example_data/spinsolve_IRCPMG/aqcu.par&quot;]
data = import_spinsolve(paths)
results = invert(data)
plot(results)</code></pre><p><img src="../assets/2D_gui.png" alt="Resulting plot"/></p><p>Similarly, now we can select regions by left-clicking at points within  the plot which enclose a region of interest. Then, we can :</p><ul><li><code>Label current selection</code> will highlight the selected polygon  with a dashed line and add some text in the plot with the weighed  average <span>$T_1/T_2$</span> of that region, as well as the volume fraction of it.</li><li><code>Filter-out selection</code> will remove everything inside the selection polygon.</li><li><code>Cancel current selection</code> will discard the current polygon in   case you do not like what you selected.</li><li><code>Reset selection</code> will remove all the selections you made.</li><li><code>Reset filter</code> will undo anything you filtered-out.</li><li><code>Save and exit</code> will bring up a window so that you can save your   plot as a .png (without the buttons).</li></ul><p>There are also some options to change the appearance of the plot, in  terms of colormap, contour levels and toggling between filled and non-filled contours. You can also add a title to the plot, which will be saved.</p><p>If you have multiple results, you can pass them as a matrix or vector  into the <code>plot()</code> function as:</p><pre><code class="language-julia hljs">plot([results  results ; results results])</code></pre><p><img src="../assets/multiple_plots.png" alt="Resulting plot"/></p><p>Of course, it would be more interesting if it wasn&#39;t four copies of the same results, but you get the point.</p><h2 id="Using-the-expfit-function"><a class="docs-heading-anchor" href="#Using-the-expfit-function">Using the expfit function</a><a id="Using-the-expfit-function-1"></a><a class="docs-heading-anchor-permalink" href="#Using-the-expfit-function" title="Permalink"></a></h2><p>In a similar way, we can perform various exponential  fits with the imported data using the <code>expfit</code> function.</p><pre><code class="language-julia hljs">using NMRInversions, GLMakie

path = &quot;.../NMRInversions.jl/example_data/csv_files/Chesire_sandstone_IR.csv&quot;
data = import_csv(IR, path)

a = expfit(1, data)  # mono-exponential fit
b = expfit(2, data)  # bi-exponential fit

plot(a,b)  # Visualize both on the same plot</code></pre><p><img src="../assets/exp_fit.png" alt="Resulting plot"/></p><p>Of course, these fits are not very good, that&#39;s why we&#39;d use inversions  instead.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../theory/">« Theory</a><a class="docs-footer-nextpage" href="../functions/">Functions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Thursday 4 September 2025 13:49">Thursday 4 September 2025</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
